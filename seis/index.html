<!DOCTYPE html>
<html>

<head>
	<title>Seis LCARS</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="date=no">
	<link rel="stylesheet" type="text/css" href="lcars-ultra-classic.css">
	<link rel="stylesheet" type="text/css" href="lcars-colors.css">
	<link rel="stylesheet" type="text/css" href="seis.css">
</head>

<body>
	<section class="wrap-standard" id="column-3">
		<div class="wrap">
			<div class="scroll-top"><a id="scroll-top" href=""><span class="hop">screen</span> top</a></div>
			<div class="left-frame-top">
				<div class="panel-1"><a href="">LCARS</a></div>
				<div class="panel-2"><span class="hop">SEIS EDITION</span></div>
			</div>
			<div class="right-frame-top">
				<div class="banner"> <a href="">SEIS</a> &#149; <span class="blink">Online</span> </div>
				<div class="data-cascade-button-group">
					<div class="cascade-wrapper">
						<div class="data-cascade" id="default">
							<div class="row-1"><div class="dc1">101</div><div class="dc2">7109</div><div class="dc3">1966</div><div class="dc44">36</div><div class="dc55">880</div><div class="dc6">11.03</div><div class="dc77">1954</div><div class="dc8">03</div><div class="dc99">6.08</div><div class="dc100">241</div><div class="dc11">309</div><div class="dc12">7.08</div><div class="dc13">1935</div><div class="dc14">12.20</div><div class="dc150">53</div><div class="dc150">1961</div><div class="dc150">2.16</div></div><div class="row-2"><div class="dc1">102</div><div class="dc2">8102</div><div class="dc3">1987</div><div class="dc44">044</div><div class="dc55">0051</div><div class="dc6">1968</div><div class="dc77">704</div><div class="dc8">10.31</div><div class="dc99">1984</div><div class="dc100">1954</div><div class="dc11">764</div><div class="dc12">1940</div><div class="dc13">9.9</div><div class="dc14">1972</div><div class="dc150">815</div><div class="dc150">4.12</div><div class="dc150">2023</div></div><div class="row-3"><div class="dc1">103</div><div class="dc2">714</div><div class="dc3">1993</div><div class="dc44">0222</div><div class="dc55">4.4</div><div class="dc6">1969</div><div class="dc77">2450</div><div class="dc8">91</div><div class="dc99">56</div><div class="dc100">21</div><div class="dc11">716</div><div class="dc12">801</div><div class="dc13">417</div><div class="dc14">602</div><div class="dc150">5618</div><div class="dc150">238</div><div class="dc150">1443</div></div><div class="row-4"><div class="dc1">104</div><div class="dc2">6104</div><div class="dc3">1995</div><div class="dc44">3.22</div><div class="dc55">1931</div><div class="dc6">0.0</div><div class="dc77">0000</div><div class="dc8">1701</div><div class="dc99">1984</div><div class="dc100">218</div><div class="dc11">908</div><div class="dc12">10</div><div class="dc13">85</div><div class="dc14">1888</div><div class="dc150">27</div><div class="dc150">2879</div><div class="dc150">213</div></div><div class="row-5"><div class="dc1">105</div><div class="dc2">08</div><div class="dc3">2001</div><div class="dc44">713</div><div class="dc55">079</div><div class="dc6">1977</div><div class="dc77">LV</div><div class="dc8">426</div><div class="dc99">105</div><div class="dc100">10</div><div class="dc11">1642</div><div class="dc12">1979</div><div class="dc13">402</div><div class="dc14">795</div><div class="dc150">361</div><div class="dc150">0852</div><div class="dc150">984</div></div><div class="row-6"><div class="dc1">106</div><div class="dc2">31</div><div class="dc3">2017</div><div class="dc44">429</div><div class="dc55">65</div><div class="dc6">871</div><div class="dc77">24</div><div class="dc8">541</div><div class="dc99">656</div><div class="dc100">M</div><div class="dc11">113</div><div class="dc12">12.6</div><div class="dc13">27</div><div class="dc14">05</div><div class="dc150">85</div><div class="dc150">12.25</div><div class="dc150">7884</div></div><div class="row-7"><div class="dc1">107</div><div class="dc2">5</div><div class="dc3">2022</div><div class="dc44">784</div><div class="dc55">3304</div><div class="dc6">42</div><div class="dc77">733</div><div class="dc8">1224</div><div class="dc99">5801</div><div class="dc100">23</div><div class="dc11">1015</div><div class="dc12">84</div><div class="dc13">36</div><div class="dc14">029</div><div class="dc150">24</div><div class="dc150">318</div><div class="dc150">12.24</div></div><div class="row-8"><div class="dc1">108</div><div class="dc2">23</div><div class="dc3">174</div><div class="dc44">91</div><div class="dc55">947</div><div class="dc6">28</div><div class="dc77">527</div><div class="dc8">04</div><div class="dc99">0469</div><div class="dc100">2200</div><div class="dc11">88</div><div class="dc12">1985</div><div class="dc13">540</div><div class="dc14">3121</div><div class="dc150">308</div><div class="dc150">9571</div><div class="dc150">404</div></div>
						</div>
					</div>
					
				</div>
				<div class="bar-panel first-bar-panel">
					<div class="bar-1"></div>
					<div class="bar-2"></div>
					<div class="bar-3"></div>
					<div class="bar-4"></div>
					<div class="bar-5"></div>
				</div>
			</div>
		</div>
		<div class="wrap" id="gap">
			<div class="left-frame">
				<div>
					<div class="panel-3">CLOCK<span class="hop"> SET font</span></div>
					<div class="panel-7">TEXT<span class="hop"> CHANGE</span></div>
				</div>
			</div>
			<div class="right-frame">
				<div class="bar-panel">
					<div class="bar-6"></div>
					<div class="bar-7"></div>
					<div class="bar-8"></div>
					<div class="bar-9"></div>
					<div class="bar-10"></div>
				</div>
				<main>

					<!-- Start your content here. -->
		
					<h2>Clock Font &#149; <span class="go-tomato" id="clock-size">
						<div id="glyphs"></div>
					</span> &#149;</h2>
					<h2>Text &#149; <span class="go-tomato" id="text"></span> &#149;</h2>
					
					<!-- End content area. -->
				</main>
			</div>
		</div>
	</section>
	<script>
		var rows = 4;
        var cols = 3;

        let lines = [];
        let id = 0;

        const curveColor = "#567a76";
        const lineColor = "#7a566e";
        const dotColor = "#c966c1";

		 class Glyph {
            constructor(dotRadius, spacing, svgContainer, attachListener) {
                this.dotRadius = dotRadius;
                this.attachListener = attachListener;
                this.svgContainer = svgContainer;
                this.spacing = spacing;
            }

            renderGlyph = () => {
                id = 0;

                const { spacing, dotRadius } = this;

                for (var j = 0; j < cols; j++) {
                    for (var i = 0; i < rows; i++) {
                        var cx = j * spacing + dotRadius * 2;
                        var cy = i * spacing + dotRadius * 2;
                        var nx = (j + 1) * spacing + dotRadius * 2;
                        var ny = (i + 1) * spacing + dotRadius * 2;

                        if (i < rows - 2) {
                            this.svgContainer.appendChild(this.addPath(`M${cy},${cx} a${spacing},${spacing} 0 0,0 ${spacing},${spacing}`));
                            this.svgContainer.appendChild(this.addPath(`M${ny},${cx} a${spacing},${spacing} 0 0,1 -${spacing},${spacing}`));
                            this.svgContainer.appendChild(this.addPath(`M${cy},${cx} a${spacing},${spacing} 0 0,1 ${spacing},${spacing}`));
                            this.svgContainer.appendChild(this.addPath(`M${cy},${nx} a${spacing},${spacing} 0 0,1 ${spacing},-${spacing}`));
                        }
                    }
                }

                for (var i = 0; i < rows - 1; i++) {
                    for (var j = 0; j < cols - 1; j++) {
                        var cx = j * spacing + dotRadius * 2;
                        var cy = i * spacing + dotRadius * 2;
                        var nx = (j + 1) * spacing + dotRadius * 2;
                        var ny = (i + 1) * spacing + dotRadius * 2;
                        const halfWidth = dotRadius / 2;

                        if (i < rows - 2) {
                            ny -= halfWidth;
                        }
                        if (j < cols - 2) {
                            nx -= halfWidth;
                        }
                        if (j == 1) {
                            cx += halfWidth;
                        }
                        if (i == 1 || i == 2) {
                            cy += halfWidth;
                        }

                        this.svgContainer.appendChild(this.addLine(cx, cy, nx, cy));
                        this.svgContainer.appendChild(this.addLine(nx, cy, nx, ny));
                        this.svgContainer.appendChild(this.addLine(cx, ny, nx, ny));
                        this.svgContainer.appendChild(this.addLine(cx, cy, cx, ny));
                    }
                }

                for (var i = 0; i < rows; i++) {
                    for (var j = 0; j < cols; j++) {
                        var cx = j * spacing + dotRadius * 2;
                        var cy = i * spacing + dotRadius * 2;
                    
                        const dot = this.addDot(cx, cy);
                        dot.setAttribute("id", j + i * cols)

                        this.svgContainer.appendChild(dot);
                    }
                }
            }

            addDot = (cx, cy) => {
                const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                circle.setAttribute("cx", cx);
                circle.setAttribute("cy", cy);
                circle.setAttribute("r", this.dotRadius);
                circle.setAttribute("fill", dotColor);

                return circle;
            }

            addLine = (x1, y1, x2, y2) => {
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", x1);
                line.setAttribute("y1", y1);
                line.setAttribute("x2", x2);
                line.setAttribute("y2", y2);
                line.setAttribute("stroke", lineColor);
                line.setAttribute("stroke-width", this.dotRadius);
                line.setAttribute("id", id++);

                if (this.attachListener) { 
                    this.attachListener(line);
                }

                lines.push(line);
                
                return line;
            }

            addPath = (d) => {
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", d);
                path.setAttribute("fill", "none");
                path.setAttribute("stroke", curveColor);
                path.setAttribute("stroke-width", this.dotRadius);
                path.setAttribute("id", id++);

                if (this.attachListener) { 
                    this.attachListener(path);
                }

                lines.push(path);

                return path
            }
        }

		const library = document.getElementById("glyphs");
        const glyphW = (cols - 1) * 15 + 2 * cols;
        const glyphH = (rows - 1) * 15 + 2 * rows;

        const divRow = document.createElement("div");

        for (let i = 0; i < 10; i++) {
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", glyphW);
            svg.setAttribute("height", glyphH);
            svg.setAttribute("onlylines", "true");
            svg.setAttribute("id", "g" + (48 + i));
            
            const glyph = new Glyph(1, 15, svg);
            glyph.renderGlyph();

            divRow.appendChild(svg);
        }

        library.appendChild(divRow);

		const clearGlyph = (selector) => {
            const lines = [...document.querySelectorAll(selector + ' line')];
            const curves = [...document.querySelectorAll(selector + ' path')];

            lines.forEach(l => l.setAttribute("selected", "false"));
            curves.forEach(c => c.setAttribute("selected", "false"));
        }

		const decodeSeis = (seis, selector) => {
            const lines = [...document.querySelectorAll(selector + ' line')];
            const curves = [...document.querySelectorAll(selector + ' path')];

            clearGlyph(selector)

            lines.forEach((l, index) => {
                const seixel = Math.floor(index / 4);
                const pos = index % 4 + 4;
                if (seis[seixel][pos] === 1) {
                    l.setAttribute("selected", "true");
                }
            })

            curves.forEach((c, index) => {
                const seixel = Math.floor(index / 4);
                const pos = index % 4;
                if (seis[seixel][pos] === 1) {
                    c.setAttribute("selected", "true");
                }
            })
        }

		function decodeFont (fontParam) {
			const font = fontParam.match(/.{1,12}/g)
				.map(glyph => {
					return glyph.match(/.{1,2}/g)
						.map(e => Number.parseInt(e, 16).toString(2).padStart(8, '0').split('').map(flag => +flag))
				})

			font.forEach((seis, index) => {
				decodeSeis(seis, '#g' + index);
			})
		}

		fetch('/font')
			.then(response => response.json())
			.then(data => {
				decodeFont(data.font);
			})
			.catch(error => {
				console.error('Error:', error);
			});

		fetch('/text')
			.then(response => response.json())
			.then(data => {
				const textEl = document.getElementById('text');
				textEl.textContent = data.text;
			})
			.catch(error => {
				console.error('Error:', error);
			});
       
	</script>
</body>

</html>